/Users/bozhen/.cargo/bin/cargo simtest --package sui --test reconfiguration_tests test_create_advance_epoch_tx_race
Using MSIM_TEST_SEED=1 from the environment
   Compiling msim v0.1.0 (/Users/bozhen/Documents/Sui-Proj/mysten-sim/msim)
   Compiling tokio v1.28.1 (/Users/bozhen/Documents/Sui-Proj/mysten-sim/msim-tokio)
   Compiling tokio-util v0.7.4
   Compiling tokio-rustls v0.23.4
   Compiling futures-timer v3.0.2 (/Users/bozhen/Documents/Sui-Proj/mysten-sim/mocked-crates/futures-timer)
   Compiling async-compression v0.3.15
   Compiling move-prover-boogie-backend v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/external-crates/move/move-prover/boogie-backend)
   Compiling tokio-io-timeout v1.2.0
   Compiling quinn v0.10.1
   Compiling governor v0.5.1
   Compiling fastcrypto v0.1.5 (https://github.com/MystenLabs/fastcrypto?rev=c27e87fb539c88b6fe1eac7dd82561254bb1e07a#c27e87fb)
   Compiling deadpool v0.9.5
   Compiling h2 v0.3.18
   Compiling tower v0.4.13
   Compiling tokio-stream v0.1.14
   Compiling aws-smithy-async v0.55.2
   Compiling move-prover v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/external-crates/move/move-prover)
   Compiling aws-credential-types v0.55.2
   Compiling tokio-postgres v0.7.7
   Compiling fastcrypto-zkp v0.1.1 (https://github.com/MystenLabs/fastcrypto?rev=c27e87fb539c88b6fe1eac7dd82561254bb1e07a#c27e87fb)
   Compiling tower-http v0.3.5
   Compiling move-stdlib v0.1.1 (/Users/bozhen/Documents/Sui-Proj/sui/external-crates/move/move-stdlib)
   Compiling anemo v0.0.0 (https://github.com/mystenlabs/anemo.git?rev=baa7cfc3ae841f88c2ff773396c5a803c377d054#baa7cfc3)
   Compiling tokio-postgres-rustls v0.9.0
   Compiling diesel-async v0.2.1
   Compiling move-unit-test v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/external-crates/move/tools/move-unit-test)
   Compiling hyper v0.14.26
   Compiling anemo-tower v0.0.0 (https://github.com/mystenlabs/anemo.git?rev=baa7cfc3ae841f88c2ff773396c5a803c377d054#baa7cfc3)
   Compiling rstest v0.16.0
   Compiling backoff v0.4.0
   Compiling tokio-retry v0.3.0
   Compiling cached v0.43.0
   Compiling criterion v0.4.0
   Compiling anemo-cli v0.0.0 (https://github.com/mystenlabs/anemo.git?rev=baa7cfc3ae841f88c2ff773396c5a803c377d054#baa7cfc3)
   Compiling hyper-rustls v0.23.2
   Compiling aws-smithy-http v0.55.2
   Compiling jsonrpsee-core v0.16.2 (https://github.com/wlmyng/jsonrpsee.git?rev=b1b300784795f6a64d0fcdf8f03081a9bc38bde8#b1b30078)
   Compiling axum v0.6.6
   Compiling aws-smithy-http-tower v0.55.2
   Compiling aws-smithy-client v0.55.2
   Compiling aws-sigv4 v0.55.2
   Compiling aws-types v0.55.2
   Compiling hyper-timeout v0.4.1
   Compiling aws-endpoint v0.55.2
   Compiling aws-http v0.55.2
   Compiling aws-sig-auth v0.55.2
   Compiling jsonrpsee-client-transport v0.16.2 (https://github.com/wlmyng/jsonrpsee.git?rev=b1b300784795f6a64d0fcdf8f03081a9bc38bde8#b1b30078)
   Compiling reqwest v0.11.13
   Compiling rusoto_credential v0.48.0
   Compiling jsonrpsee-wasm-client v0.16.2 (https://github.com/wlmyng/jsonrpsee.git?rev=b1b300784795f6a64d0fcdf8f03081a9bc38bde8#b1b30078)
   Compiling jsonrpsee-ws-client v0.16.2 (https://github.com/wlmyng/jsonrpsee.git?rev=b1b300784795f6a64d0fcdf8f03081a9bc38bde8#b1b30078)
   Compiling rusoto_signature v0.48.0
   Compiling tonic v0.8.3
   Compiling move-package v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/external-crates/move/tools/move-package)
   Compiling rusoto_core v0.48.0
   Compiling aws-sdk-sts v0.26.0
   Compiling aws-sdk-sso v0.26.0
   Compiling console-api v0.4.0
   Compiling move-cli v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/external-crates/move/tools/move-cli)
   Compiling jsonrpsee-server v0.16.2 (https://github.com/wlmyng/jsonrpsee.git?rev=b1b300784795f6a64d0fcdf8f03081a9bc38bde8#b1b30078)
   Compiling jsonrpsee-http-client v0.16.2 (https://github.com/wlmyng/jsonrpsee.git?rev=b1b300784795f6a64d0fcdf8f03081a9bc38bde8#b1b30078)
   Compiling console-subscriber v0.1.8
   Compiling aws-config v0.55.1
   Compiling tonic-health v0.8.0
   Compiling rusoto_kms v0.48.0
   Compiling axum-extra v0.4.2
   Compiling move-transactional-test-runner v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/external-crates/move/testing-infra/transactional-test-runner)
   Compiling axum-server v0.4.4
   Compiling jsonrpsee v0.16.2 (https://github.com/wlmyng/jsonrpsee.git?rev=b1b300784795f6a64d0fcdf8f03081a9bc38bde8#b1b30078)
   Compiling workspace-hack v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/workspace-hack)
   Compiling sui-enum-compat-util v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-enum-compat-util)
   Compiling sui-proc-macros v0.7.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-proc-macros)
   Compiling mysten-util-mem-derive v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/mysten-util-mem-derive)
   Compiling shared-crypto v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/shared-crypto)
   Compiling narwhal-crypto v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/crypto)
   Compiling sui-protocol-config-macros v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-protocol-config-macros)
   Compiling mysten-util-mem v0.11.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/mysten-util-mem)
   Compiling sui-macros v0.7.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-macros)
   Compiling prometheus-closure-metric v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/prometheus-closure-metric)
   Compiling mysten-network v0.2.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/mysten-network)
   Compiling narwhal-config v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/config)
   Compiling mysten-metrics v0.7.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/mysten-metrics)
   Compiling typed-store v0.4.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/typed-store)
   Compiling sui-protocol-config v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-protocol-config)
   Compiling sui-cost-tables v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-cost-tables)
   Compiling sui-types v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-types)
   Compiling aws-smithy-http v0.54.4
   Compiling aws-smithy-async v0.54.4
   Compiling narwhal-dag v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/dag)
   Compiling aws-smithy-http-tower v0.54.4
   Compiling mysten-common v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/mysten-common)
   Compiling narwhal-types v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/types)
   Compiling aws-smithy-client v0.54.4
   Compiling aws-credential-types v0.54.1
   Compiling aws-types v0.54.1
   Compiling narwhal-network v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/network)
   Compiling aws-sigv4 v0.54.1
   Compiling telemetry-subscribers v0.2.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/telemetry-subscribers)
   Compiling aws-endpoint v0.54.1
   Compiling aws-sig-auth v0.54.1
   Compiling aws-http v0.54.1
   Compiling sui-verifier-latest v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/sui-execution/latest/sui-verifier)
   Compiling sui-move-natives-latest v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/sui-execution/latest/sui-move-natives)
   Compiling sui-adapter-latest v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/sui-execution/latest/sui-adapter)
   Compiling aws-sdk-sso v0.24.0
   Compiling sui-move-build v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-move-build)
   Compiling aws-sdk-sts v0.24.0
   Compiling sui-keys v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-keys)
   Compiling typed-store-derive v0.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/typed-store-derive)
   Compiling narwhal-storage v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/storage)
   Compiling aws-config v0.54.1
   Compiling narwhal-consensus v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/consensus)
   Compiling narwhal-primary v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/primary)
   Compiling narwhal-worker v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/worker)
   Compiling sui-framework v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-framework)
   Compiling object_store v0.5.4
   Compiling sui-test-transaction-builder v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-test-transaction-builder)
   Compiling sui-open-rpc v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-open-rpc)
   Compiling narwhal-executor v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/executor)
   Compiling sui-open-rpc-macros v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-open-rpc-macros)
   Compiling sui-tls v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-tls)
   Compiling narwhal-node v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/narwhal/node)
   Compiling sui-json v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-json)
   Compiling sui-simulator v0.7.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-simulator)
   Compiling sui-framework-snapshot v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-framework-snapshot)
   Compiling sui-json-rpc-types v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-json-rpc-types)
   Compiling sui-storage v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-storage)
   Compiling sui-transaction-builder v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-transaction-builder)
   Compiling sui-config v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-config)
   Compiling sui-genesis-builder v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-genesis-builder)
   Compiling sui-swarm-config v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm-config)
   Compiling sui-network v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-network)
   Compiling sui-core v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-core)
   Compiling sui-json-rpc v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-json-rpc)
   Compiling sui-telemetry v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-telemetry)
   Compiling sui-move v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-move)
   Compiling sui-sdk v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-sdk)
   Compiling sui-node v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-node)
   Compiling sui-source-validation v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-source-validation)
   Compiling sui-swarm v0.0.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm)
   Compiling sui-replay v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-replay)
   Compiling sui v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui)
   Compiling sui-tool v1.3.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/sui-tool)
   Compiling test-utils v0.1.0 (/Users/bozhen/Documents/Sui-Proj/sui/crates/test-utils)
warning: variable does not need to be mutable
   --> crates/sui/tests/reconfiguration_tests.rs:498:9
    |
498 |     let mut test_cluster = TestClusterBuilder::new()
    |         ----^^^^^^^^^^^^
    |         |
    |         help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` on by default

warning: `sui` (test "reconfiguration_tests") generated 1 warning
    Finished simulator [optimized + debuginfo] target(s) in 8m 32s
warning: the following packages contain code that will be rejected by a future version of Rust: nom v5.1.2
note: to see what the problems were, use the option `--future-incompat-report`, or run `cargo report future-incompatibilities --id 21`
    Starting 2 tests across 1 binaries (12 skipped)
        FAIL [   0.650s] sui::reconfiguration_tests test_create_advance_epoch_tx_race

--- STDOUT:              sui::reconfiguration_tests test_create_advance_epoch_tx_race ---

running 1 test
2023-05-26T00:18:44.912462Z  WARN msim::sim::rand: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/rand.rs:66: failed to initialize std random state, std HashMap will not be deterministic
2023-05-26T00:18:44.912541Z  INFO msim::sim::intercept: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/intercept.rs:12: enabling library call intercepts on thread ThreadId(3)
2022-05-29T06:52:07.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(0), name "main"
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 28
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 7
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 28
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 7
2022-05-29T06:52:07.000000Z  INFO node{id=0 name="main"}:connection-manager{peer=aae368f9}: anemo::network::connection_manager: /Users/bozhen/.cargo/git/checkouts/anemo-b054b2cc97edf2b7/baa7cfc/crates/anemo/src/network/connection_manager.rs:105: ConnectionManager started
2022-05-29T06:52:07.000000Z  INFO node{id=0 name="main"}:connection-manager{peer=36f804e8}: anemo::network::connection_manager: /Users/bozhen/.cargo/git/checkouts/anemo-b054b2cc97edf2b7/baa7cfc/crates/anemo/src/network/connection_manager.rs:105: ConnectionManager started
starting test iteration 0 with seed 1
2023-05-26T00:18:44.916090Z  INFO msim::sim::intercept: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/intercept.rs:12: enabling library call intercepts on thread ThreadId(4)
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(0), name "main"
2023-05-26T00:18:44.916230Z  INFO msim::sim::intercept: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/intercept.rs:12: enabling library call intercepts on thread ThreadId(5)
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(0), name "main"
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(1), name "client"
2022-01-03T02:04:56.000000Z  INFO node{id=1 name="client"}: reconfiguration_tests: crates/sui/tests/reconfiguration_tests.rs:387: client restarted
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(1), name "client"
2022-01-03T02:04:56.000000Z  INFO node{id=1 name="client"}: sui_swarm_config::genesis_config: crates/sui-swarm-config/src/genesis_config.rs:212: Creating accounts and token allocations...
note: run with `MSIM_TEST_SEED=1` environment variable to reproduce this error
test test_create_advance_epoch_tx_race ... FAILED

failures:

failures:
    test_create_advance_epoch_tx_race

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 13 filtered out; finished in 0.58s


--- STDERR:              sui::reconfiguration_tests test_create_advance_epoch_tx_race ---
thread '<unnamed>' panicked at 'duplicate socket', /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:163:9
stack backtrace:
   0:        0x10e5cebd6 - std::backtrace_rs::backtrace::libunwind::trace::hb6e20554c370f2e3
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5
   1:        0x10e5cebd6 - std::backtrace_rs::backtrace::trace_unsynchronized::h4cf6d4d5ecaf68bc
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5
   2:        0x10e5cebd6 - std::sys_common::backtrace::_print_fmt::h082ea160697d6d76
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:65:5
   3:        0x10e5cebd6 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h47bed05ceb7970ee
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:44:22
   4:        0x10e5f28ca - core::fmt::write::hefd823d99333384a
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/fmt/mod.rs:1213:17
   5:        0x10e5c70fc - std::io::Write::write_fmt::hb978956bb1b85e2b
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/io/mod.rs:1682:15
   6:        0x10e5ce9ba - std::sys_common::backtrace::_print::hb9f21d71c6f0ffcc
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:47:5
   7:        0x10e5ce9ba - std::sys_common::backtrace::print::hc9e298c4664da113
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:34:9
   8:        0x10e5d0db3 - std::panicking::default_hook::{{closure}}::hb97411d6e916e1d2
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:267:22
   9:        0x10e5d0b08 - std::panicking::default_hook::hc3ac81176817192f
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:286:9
  10:        0x10e38351d - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h9eb1c4dce9d18c68
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:2002:9
  11:        0x10e38351d - msim::sim::task::PanicHookGuard::call_hook::h044850fc665657f1
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:85:9
  12:        0x10e38351d - msim::sim::task::Executor::run_all_ready::{{closure}}::h989fe353cae48b6e
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:309:21
  13:        0x10e5d1519 - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h37363efbc7b1d5b1
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:2002:9
  14:        0x10e5d1519 - std::panicking::rust_panic_with_hook::hc11209fa2686218a
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:692:13
  15:        0x10e5d1273 - std::panicking::begin_panic_handler::{{closure}}::h5bad1bd665ab68a6
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:577:13
  16:        0x10e5cf078 - std::sys_common::backtrace::__rust_end_short_backtrace::h6f4efa73918edf57
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:137:18
  17:        0x10e5d0f7d - rust_begin_unwind
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:575:5
  18:        0x10e6d1b93 - core::panicking::panic_fmt::hb5474ac70e328787
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/panicking.rs:64:14
  19:        0x10e373d91 - msim::sim::net::HostNetworkState::add_socket::h1cefd93dddfe710d
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:163:9
  20:        0x10e37d116 - socket
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:502:9
  21:        0x10e5d40e9 - std::sys::unix::net::Socket::new_raw::h6da4acf446fa0a31
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys/unix/net.rs:88:34
  22:        0x10e5d9a77 - std::sys::unix::net::Socket::new::h79b40b5e3aad7892
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys/unix/net.rs:67:9
  23:        0x10e5d9a77 - std::sys_common::net::TcpListener::bind::h496ae4a2c9653118
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/net.rs:393:20
  24:        0x10d280e06 - core::ops::function::FnMut::call_mut::h3fc21a95af7973b4
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/ops/function.rs:166:5
  25:        0x10d280e06 - std::net::each_addr::h513e4e21d15ca9d5
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/net/mod.rs:83:15
  26:        0x10d27ab5b - std::net::tcp::TcpListener::bind::h2516e081bba84e53
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/net/tcp.rs:752:9
  27:        0x10d27ab5b - narwhal_config::utils::get_ephemeral_port::hce84b2686003c29d
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/utils.rs:23:20
  28:        0x10d27ab5b - narwhal_config::utils::get_available_port::h43f77371196ee4a2
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/utils.rs:13:27
  29:        0x10d26f85c - <narwhal_config::PrometheusMetricsParameters as core::default::Default>::default::ha22201987f246405
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/lib.rs:289:63
  30:        0x10d26faec - <narwhal_config::Parameters as core::default::Default>::default::h5a16d5b710504d02
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/lib.rs:431:33
  31:        0x10b27e7bd - sui_swarm_config::network_config_builder::ConfigBuilder<R>::build_with_validators::{{closure}}::he78da3860bfacc71
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm-config/src/network_config_builder.rs:399:27
  32:        0x10b27e7bd - core::iter::adapters::map::map_fold::{{closure}}::h3b5824d8d3f046ea
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/map.rs:84:28
  33:        0x10b27e7bd - <core::iter::adapters::enumerate::Enumerate<I> as core::iter::traits::iterator::Iterator>::fold::enumerate::{{closure}}::h9b8889959763ab41
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/enumerate.rs:106:27
  34:        0x10b27e7bd - core::iter::traits::iterator::Iterator::fold::h226166ae45455e3e
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/traits/iterator.rs:2438:21
  35:        0x10b27e7bd - <core::iter::adapters::enumerate::Enumerate<I> as core::iter::traits::iterator::Iterator>::fold::h59e0a435470738f5
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/enumerate.rs:112:9
  36:        0x10b27e7bd - <core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::h9906e6ec948953be
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/map.rs:124:9
  37:        0x10b4784ed - core::iter::traits::iterator::Iterator::for_each::hb5ebac1c1244cf21
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/traits/iterator.rs:837:9
  38:        0x10b4784ed - alloc::vec::Vec<T,A>::extend_trusted::ha081e862d3ce49ba
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/mod.rs:2885:17
  39:        0x10b4784ed - <alloc::vec::Vec<T,A> as alloc::vec::spec_extend::SpecExtend<T,I>>::spec_extend::h9ed29dfad15b7165
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/spec_extend.rs:26:9
  40:        0x10b4784ed - <alloc::vec::Vec<T> as alloc::vec::spec_from_iter_nested::SpecFromIterNested<T,I>>::from_iter::h9935f1a646b3e1cb
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/spec_from_iter_nested.rs:62:9
  41:        0x10b4784ed - alloc::vec::in_place_collect::<impl alloc::vec::spec_from_iter::SpecFromIter<T,I> for alloc::vec::Vec<T>>::from_iter::h46836b5a070d09f3
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/in_place_collect.rs:167:20
  42:        0x10b3281a1 - <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter::hdfe70ba65d8ef105
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/mod.rs:2753:9
  43:        0x10b3281a1 - core::iter::traits::iterator::Iterator::collect::hac68dd2b9f8ae08b
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/traits/iterator.rs:1860:9
  44:        0x10b3281a1 - sui_swarm_config::network_config_builder::ConfigBuilder<R>::build_with_validators::h927c544fbf145dd8
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm-config/src/network_config_builder.rs:358:33
  45:        0x10b3281a1 - sui_swarm_config::network_config_builder::ConfigBuilder<R>::build::h02c1733dc6a88a53
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm-config/src/network_config_builder.rs:295:9
  46:        0x10b4ac71b - sui_swarm::memory::swarm::SwarmBuilder<R>::build::hdccc42c664ba900c
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm/src/memory/swarm.rs:185:30
  47:        0x10b3bb049 - test_utils::network::TestClusterBuilder::start_swarm::{{closure}}::ha8001f10778e5774
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/test-utils/src/network.rs:572:25
  48:        0x10b3bb049 - test_utils::network::TestClusterBuilder::start_test_network_with_customized_ports::{{closure}}::h20b4c7bcf5bacea7
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/test-utils/src/network.rs:512:39
  49:        0x10b3befaa - test_utils::network::TestClusterBuilder::build::{{closure}}::hb3d87a2faef88646
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/test-utils/src/network.rs:505:70
  50:        0x10b3ef639 - reconfiguration_tests::test_create_advance_epoch_tx_race::{{closure}}::{{closure}}::{{closure}}::he5b2a3e319c04139
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui/tests/reconfiguration_tests.rs:373:9
  51:        0x10b3ef639 - <core::pin::Pin<P> as core::future::future::Future>::poll::h10468c8b952bd56b
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/future/future.rs:125:9
  52:        0x10b3ef639 - <&mut F as core::future::future::Future>::poll::ha450074bd65f3da1
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/future/future.rs:113:9
  53:        0x10b2a18a0 - msim::sim::task::TaskNodeHandle::spawn_local::{{closure}}::{{closure}}::h92fe5996daaa8ec4
                               at /Users/bozhen/.cargo/git/checkouts/tokio-madsim-fork-1ea997b3e6ea1b1d/e469350/tokio/src/macros/select.rs:524:49
  54:        0x10b2a18a0 - <real_tokio::future::poll_fn::PollFn<F> as core::future::future::Future>::poll::hb1ad4ce810880c41
                               at /Users/bozhen/.cargo/git/checkouts/tokio-madsim-fork-1ea997b3e6ea1b1d/e469350/tokio/src/future/poll_fn.rs:58:9
  55:        0x10b3fb2cc - msim::sim::task::TaskNodeHandle::spawn_local::{{closure}}::h92a5b6ae6dd19a9a
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:540:17
  56:        0x10b3fb2cc - <core::pin::Pin<P> as core::future::future::Future>::poll::h923f6c36de2bf737
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/future/future.rs:125:9
  57:        0x10b335037 - async_task::raw::RawTask<F,T,S>::run::h108cdde59485920e
                               at /Users/bozhen/.cargo/git/checkouts/async-task-2c3ead35a682b15c/4e45b26/src/raw.rs:511:20
  58:        0x10e382cdf - msim::sim::task::Executor::run_all_ready::{{closure}}::hd562b1b50cdde370
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:339:17
  59:        0x10e382cdf - std::panicking::try::do_call::h534425ad26abdbb9
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:483:40
  60:        0x10e382cdf - std::panicking::try::h8d794a4b0eba949b
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:447:19
  61:        0x10e382cdf - std::panic::catch_unwind::h26a50eeecce054c1
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panic.rs:140:14
  62:        0x10e382cdf - msim::sim::task::Executor::run_all_ready::hea72a78f11f643b8
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:338:26
  63:        0x10b3823d1 - msim::sim::task::Executor::block_on::he69987ace50ad556
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:268:13
  64:        0x10b31133f - msim::sim::runtime::Runtime::block_on::haab1eacc116a7b79
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/runtime/mod.rs:137:9
  65:        0x10b2677f9 - reconfiguration_tests::test_create_advance_epoch_tx_race::{{closure}}::hc4ce79bab8ece887
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui/tests/reconfiguration_tests.rs:387:40
  66:        0x10b2677f9 - std::sys_common::backtrace::__rust_begin_short_backtrace::h2fa6bbfd439dd1c2
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:121:18
  67:        0x10b299317 - std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}::h01492b7e8335c79a
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/thread/mod.rs:558:17
  68:        0x10b299317 - <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h4a7d4a6b8cbd739a
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/panic/unwind_safe.rs:271:9
  69:        0x10b299317 - std::panicking::try::do_call::hc7592708078889d3
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:483:40
  70:        0x10b299317 - std::panicking::try::h89c4a6df15215752
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:447:19
  71:        0x10b299317 - std::panic::catch_unwind::hcc8faa066d870ca6
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panic.rs:140:14
  72:        0x10b299317 - std::thread::Builder::spawn_unchecked_::{{closure}}::hfc0603b6b1300651
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/thread/mod.rs:557:30
  73:        0x10b299317 - core::ops::function::FnOnce::call_once{{vtable.shim}}::hde67c7db426e2bbd
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/ops/function.rs:250:5
  74:        0x10e5d75e7 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hd4e8d9c741b0560c
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:1988:9
  75:        0x10e5d75e7 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h4d806e24df99a0d6
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:1988:9
  76:        0x10e5d75e7 - std::sys::unix::thread::Thread::new::thread_start::had0599fead9033cd
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys/unix/thread.rs:108:17
  77:     0x7ff80fb15259 - __pthread_start

   Canceling due to test failure: 1 tests still running
        FAIL [   0.649s] sui::reconfiguration_tests test_create_advance_epoch_tx_race_x

--- STDOUT:              sui::reconfiguration_tests test_create_advance_epoch_tx_race_x ---

running 1 test
2023-05-26T00:18:44.921663Z  WARN msim::sim::rand: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/rand.rs:66: failed to initialize std random state, std HashMap will not be deterministic
2023-05-26T00:18:44.921736Z  INFO msim::sim::intercept: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/intercept.rs:12: enabling library call intercepts on thread ThreadId(3)
2022-05-29T06:52:07.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(0), name "main"
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 28
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 7
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 28
2022-05-29T06:52:07.000000Z  WARN node{id=0 name="main"}: msim::sim::net: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:580: unhandled socket option 0 7
2022-05-29T06:52:07.000000Z  INFO node{id=0 name="main"}:connection-manager{peer=aae368f9}: anemo::network::connection_manager: /Users/bozhen/.cargo/git/checkouts/anemo-b054b2cc97edf2b7/baa7cfc/crates/anemo/src/network/connection_manager.rs:105: ConnectionManager started
2022-05-29T06:52:07.000000Z  INFO node{id=0 name="main"}:connection-manager{peer=36f804e8}: anemo::network::connection_manager: /Users/bozhen/.cargo/git/checkouts/anemo-b054b2cc97edf2b7/baa7cfc/crates/anemo/src/network/connection_manager.rs:105: ConnectionManager started
starting test iteration 0 with seed 1
2023-05-26T00:18:44.925351Z  INFO msim::sim::intercept: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/intercept.rs:12: enabling library call intercepts on thread ThreadId(4)
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(0), name "main"
2023-05-26T00:18:44.925476Z  INFO msim::sim::intercept: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/intercept.rs:12: enabling library call intercepts on thread ThreadId(5)
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(0), name "main"
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(1), name "client"
2022-01-03T02:04:56.000000Z  INFO node{id=1 name="client"}: reconfiguration_tests: crates/sui/tests/reconfiguration_tests.rs:543: client restarted
2022-01-03T02:04:56.000000Z  INFO msim::sim::task: /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:328: Executor running task with id NodeId(1), name "client"
2022-01-03T02:04:56.000000Z  INFO node{id=1 name="client"}: sui_swarm_config::genesis_config: crates/sui-swarm-config/src/genesis_config.rs:212: Creating accounts and token allocations...
note: run with `MSIM_TEST_SEED=1` environment variable to reproduce this error
test test_create_advance_epoch_tx_race_x ... FAILED

failures:

failures:
    test_create_advance_epoch_tx_race_x

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 13 filtered out; finished in 0.58s


--- STDERR:              sui::reconfiguration_tests test_create_advance_epoch_tx_race_x ---
thread '<unnamed>' panicked at 'duplicate socket', /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:163:9
stack backtrace:
   0:        0x10539abd6 - std::backtrace_rs::backtrace::libunwind::trace::hb6e20554c370f2e3
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5
   1:        0x10539abd6 - std::backtrace_rs::backtrace::trace_unsynchronized::h4cf6d4d5ecaf68bc
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5
   2:        0x10539abd6 - std::sys_common::backtrace::_print_fmt::h082ea160697d6d76
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:65:5
   3:        0x10539abd6 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h47bed05ceb7970ee
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:44:22
   4:        0x1053be8ca - core::fmt::write::hefd823d99333384a
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/fmt/mod.rs:1213:17
   5:        0x1053930fc - std::io::Write::write_fmt::hb978956bb1b85e2b
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/io/mod.rs:1682:15
   6:        0x10539a9ba - std::sys_common::backtrace::_print::hb9f21d71c6f0ffcc
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:47:5
   7:        0x10539a9ba - std::sys_common::backtrace::print::hc9e298c4664da113
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:34:9
   8:        0x10539cdb3 - std::panicking::default_hook::{{closure}}::hb97411d6e916e1d2
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:267:22
   9:        0x10539cb08 - std::panicking::default_hook::hc3ac81176817192f
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:286:9
  10:        0x10514f51d - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h9eb1c4dce9d18c68
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:2002:9
  11:        0x10514f51d - msim::sim::task::PanicHookGuard::call_hook::h044850fc665657f1
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:85:9
  12:        0x10514f51d - msim::sim::task::Executor::run_all_ready::{{closure}}::h989fe353cae48b6e
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:309:21
  13:        0x10539d519 - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h37363efbc7b1d5b1
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:2002:9
  14:        0x10539d519 - std::panicking::rust_panic_with_hook::hc11209fa2686218a
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:692:13
  15:        0x10539d273 - std::panicking::begin_panic_handler::{{closure}}::h5bad1bd665ab68a6
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:577:13
  16:        0x10539b078 - std::sys_common::backtrace::__rust_end_short_backtrace::h6f4efa73918edf57
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:137:18
  17:        0x10539cf7d - rust_begin_unwind
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:575:5
  18:        0x10549db93 - core::panicking::panic_fmt::hb5474ac70e328787
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/panicking.rs:64:14
  19:        0x10513fd91 - msim::sim::net::HostNetworkState::add_socket::h1cefd93dddfe710d
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:163:9
  20:        0x105149116 - socket
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/net/mod.rs:502:9
  21:        0x1053a00e9 - std::sys::unix::net::Socket::new_raw::h6da4acf446fa0a31
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys/unix/net.rs:88:34
  22:        0x1053a5a77 - std::sys::unix::net::Socket::new::h79b40b5e3aad7892
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys/unix/net.rs:67:9
  23:        0x1053a5a77 - std::sys_common::net::TcpListener::bind::h496ae4a2c9653118
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/net.rs:393:20
  24:        0x10404ce06 - core::ops::function::FnMut::call_mut::h3fc21a95af7973b4
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/ops/function.rs:166:5
  25:        0x10404ce06 - std::net::each_addr::h513e4e21d15ca9d5
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/net/mod.rs:83:15
  26:        0x104046b5b - std::net::tcp::TcpListener::bind::h2516e081bba84e53
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/net/tcp.rs:752:9
  27:        0x104046b5b - narwhal_config::utils::get_ephemeral_port::hce84b2686003c29d
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/utils.rs:23:20
  28:        0x104046b5b - narwhal_config::utils::get_available_port::h43f77371196ee4a2
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/utils.rs:13:27
  29:        0x10403b85c - <narwhal_config::PrometheusMetricsParameters as core::default::Default>::default::ha22201987f246405
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/lib.rs:289:63
  30:        0x10403baec - <narwhal_config::Parameters as core::default::Default>::default::h5a16d5b710504d02
                               at /Users/bozhen/Documents/Sui-Proj/sui/narwhal/config/src/lib.rs:431:33
  31:        0x10204a7bd - sui_swarm_config::network_config_builder::ConfigBuilder<R>::build_with_validators::{{closure}}::he78da3860bfacc71
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm-config/src/network_config_builder.rs:399:27
  32:        0x10204a7bd - core::iter::adapters::map::map_fold::{{closure}}::h3b5824d8d3f046ea
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/map.rs:84:28
  33:        0x10204a7bd - <core::iter::adapters::enumerate::Enumerate<I> as core::iter::traits::iterator::Iterator>::fold::enumerate::{{closure}}::h9b8889959763ab41
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/enumerate.rs:106:27
  34:        0x10204a7bd - core::iter::traits::iterator::Iterator::fold::h226166ae45455e3e
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/traits/iterator.rs:2438:21
  35:        0x10204a7bd - <core::iter::adapters::enumerate::Enumerate<I> as core::iter::traits::iterator::Iterator>::fold::h59e0a435470738f5
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/enumerate.rs:112:9
  36:        0x10204a7bd - <core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::h9906e6ec948953be
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/adapters/map.rs:124:9
  37:        0x1022444ed - core::iter::traits::iterator::Iterator::for_each::hb5ebac1c1244cf21
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/traits/iterator.rs:837:9
  38:        0x1022444ed - alloc::vec::Vec<T,A>::extend_trusted::ha081e862d3ce49ba
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/mod.rs:2885:17
  39:        0x1022444ed - <alloc::vec::Vec<T,A> as alloc::vec::spec_extend::SpecExtend<T,I>>::spec_extend::h9ed29dfad15b7165
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/spec_extend.rs:26:9
  40:        0x1022444ed - <alloc::vec::Vec<T> as alloc::vec::spec_from_iter_nested::SpecFromIterNested<T,I>>::from_iter::h9935f1a646b3e1cb
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/spec_from_iter_nested.rs:62:9
  41:        0x1022444ed - alloc::vec::in_place_collect::<impl alloc::vec::spec_from_iter::SpecFromIter<T,I> for alloc::vec::Vec<T>>::from_iter::h46836b5a070d09f3
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/in_place_collect.rs:167:20
  42:        0x1020f41a1 - <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter::hdfe70ba65d8ef105
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/vec/mod.rs:2753:9
  43:        0x1020f41a1 - core::iter::traits::iterator::Iterator::collect::hac68dd2b9f8ae08b
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/iter/traits/iterator.rs:1860:9
  44:        0x1020f41a1 - sui_swarm_config::network_config_builder::ConfigBuilder<R>::build_with_validators::h927c544fbf145dd8
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm-config/src/network_config_builder.rs:358:33
  45:        0x1020f41a1 - sui_swarm_config::network_config_builder::ConfigBuilder<R>::build::h02c1733dc6a88a53
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm-config/src/network_config_builder.rs:295:9
  46:        0x10227871b - sui_swarm::memory::swarm::SwarmBuilder<R>::build::hdccc42c664ba900c
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui-swarm/src/memory/swarm.rs:185:30
  47:        0x102187049 - test_utils::network::TestClusterBuilder::start_swarm::{{closure}}::ha8001f10778e5774
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/test-utils/src/network.rs:572:25
  48:        0x102187049 - test_utils::network::TestClusterBuilder::start_test_network_with_customized_ports::{{closure}}::h20b4c7bcf5bacea7
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/test-utils/src/network.rs:512:39
  49:        0x10218afaa - test_utils::network::TestClusterBuilder::build::{{closure}}::hb3d87a2faef88646
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/test-utils/src/network.rs:505:70
  50:        0x1021c0079 - reconfiguration_tests::test_create_advance_epoch_tx_race_x::{{closure}}::{{closure}}::{{closure}}::h6c0ba15f3bdacdb2
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui/tests/reconfiguration_tests.rs:501:9
  51:        0x1021c0079 - <core::pin::Pin<P> as core::future::future::Future>::poll::h69fb25eaaecf72b2
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/future/future.rs:125:9
  52:        0x1021c0079 - <&mut F as core::future::future::Future>::poll::hdc4b9b84f9ead1c5
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/future/future.rs:113:9
  53:        0x10206caa0 - msim::sim::task::TaskNodeHandle::spawn_local::{{closure}}::{{closure}}::he6434d665c6b6a17
                               at /Users/bozhen/.cargo/git/checkouts/tokio-madsim-fork-1ea997b3e6ea1b1d/e469350/tokio/src/macros/select.rs:524:49
  54:        0x10206caa0 - <real_tokio::future::poll_fn::PollFn<F> as core::future::future::Future>::poll::h5581d38f967225d0
                               at /Users/bozhen/.cargo/git/checkouts/tokio-madsim-fork-1ea997b3e6ea1b1d/e469350/tokio/src/future/poll_fn.rs:58:9
  55:        0x1021c763c - msim::sim::task::TaskNodeHandle::spawn_local::{{closure}}::h35f3eced9c08bac2
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:540:17
  56:        0x1021c763c - <core::pin::Pin<P> as core::future::future::Future>::poll::h928dea9f3a42a663
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/future/future.rs:125:9
  57:        0x102102617 - async_task::raw::RawTask<F,T,S>::run::h24c8fbec70891173
                               at /Users/bozhen/.cargo/git/checkouts/async-task-2c3ead35a682b15c/4e45b26/src/raw.rs:511:20
  58:        0x10514ecdf - msim::sim::task::Executor::run_all_ready::{{closure}}::hd562b1b50cdde370
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:339:17
  59:        0x10514ecdf - std::panicking::try::do_call::h534425ad26abdbb9
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:483:40
  60:        0x10514ecdf - std::panicking::try::h8d794a4b0eba949b
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:447:19
  61:        0x10514ecdf - std::panic::catch_unwind::h26a50eeecce054c1
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panic.rs:140:14
  62:        0x10514ecdf - msim::sim::task::Executor::run_all_ready::hea72a78f11f643b8
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:338:26
  63:        0x10214af01 - msim::sim::task::Executor::block_on::h5e525b5cae95e3f5
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/task.rs:268:13
  64:        0x1020dc37f - msim::sim::runtime::Runtime::block_on::h45de4d0ac1d0ea69
                               at /Users/bozhen/Documents/Sui-Proj/mysten-sim/msim/src/sim/runtime/mod.rs:137:9
  65:        0x102031b99 - reconfiguration_tests::test_create_advance_epoch_tx_race_x::{{closure}}::hda7b9ced90cba6fc
                               at /Users/bozhen/Documents/Sui-Proj/sui/crates/sui/tests/reconfiguration_tests.rs:543:45
  66:        0x102031b99 - std::sys_common::backtrace::__rust_begin_short_backtrace::h03c59e489d6c706d
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys_common/backtrace.rs:121:18
  67:        0x10205f8c7 - std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}::he919419725ec295e
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/thread/mod.rs:558:17
  68:        0x10205f8c7 - <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::hdb0bfe8007ed4840
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/panic/unwind_safe.rs:271:9
  69:        0x10205f8c7 - std::panicking::try::do_call::h4058b4ff8b7fb2d3
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:483:40
  70:        0x10205f8c7 - std::panicking::try::hb7515a810356b481
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panicking.rs:447:19
  71:        0x10205f8c7 - std::panic::catch_unwind::h09211422453fda94
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/panic.rs:140:14
  72:        0x10205f8c7 - std::thread::Builder::spawn_unchecked_::{{closure}}::h92007dbb772ec615
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/thread/mod.rs:557:30
  73:        0x10205f8c7 - core::ops::function::FnOnce::call_once{{vtable.shim}}::h0ec9dde2becc1381
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/core/src/ops/function.rs:250:5
  74:        0x1053a35e7 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hd4e8d9c741b0560c
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:1988:9
  75:        0x1053a35e7 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h4d806e24df99a0d6
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/alloc/src/boxed.rs:1988:9
  76:        0x1053a35e7 - std::sys::unix::thread::Thread::new::thread_start::had0599fead9033cd
                               at /rustc/9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0/library/std/src/sys/unix/thread.rs:108:17
  77:     0x7ff80fb15259 - __pthread_start

------------
     Summary [   0.656s] 2 tests run: 0 passed, 2 failed, 12 skipped
        FAIL [   0.650s] sui::reconfiguration_tests test_create_advance_epoch_tx_race
        FAIL [   0.649s] sui::reconfiguration_tests test_create_advance_epoch_tx_race_x
error: test run failed
Updated 0 paths from the index

Process finished with exit code 100


